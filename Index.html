<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escala Ferramentaria GOL (BSB) - Julho</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            -webkit-print-color-adjust: exact;
            print-color-adjust: exact;
        }
        @media print {
            body {
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
            .no-print {
                display: none;
            }
            .print-container {
                margin: 0;
                padding: 0;
                border: none;
                box-shadow: none;
            }
            html, body {
                width: 210mm;
                height: 297mm;
                margin: 0;
                padding: 0;
            }
            .footer {
                position: fixed;
                bottom: 0;
                width: 100%;
            }
        }
        .name-tag {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
            margin: 1px;
            white-space: nowrap;
        }
        .bg-sky-100 { background-color: #e0f2fe; }
        .text-sky-800 { color: #075985; }
        .bg-amber-100 { background-color: #fef3c7; }
        .text-amber-800 { color: #92400e; }
        .bg-emerald-100 { background-color: #d1fae5; }
        .text-emerald-800 { color: #065f46; }
        .bg-rose-100 { background-color: #ffe4e6; }
        .text-rose-800 { color: #9f1239; }
        .bg-blue-100 { background-color: #dbeafe; }
        .text-blue-800 { color: #1e40af; }
        .bg-gray-100 { background-color: #f3f4f6; }
        .bg-gray-200 { background-color: #e5e7eb; }
        .weekend {
            background-color: #f3f4f6;
        }
        .btn-shift {
            transition: all 0.2s ease-in-out;
        }
        .btn-shift.active {
            background-color: #ea580c; /* orange-600 */
            color: white;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
    </style>
</head>
<body class="bg-gray-100 p-2 sm:p-4 md:p-8">

    <div id="schedule-container" class="print-container max-w-7xl mx-auto bg-white rounded-2xl shadow-lg p-4 sm:p-6 md:p-8">
        <!-- Header -->
        <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4">
            <div class="flex items-center mb-4 sm:mb-0">
                <img src="https://i.imgur.com/ApK41Jx.png" alt="Logo da GOL" class="h-10 mr-4">
                <div>
                    <h1 class="text-2xl md:text-3xl font-bold text-gray-800">Escala de Ferramentaria</h1>
                    <p class="text-md md:text-lg text-gray-500">Brasilia (BSB) - Julho 2025</p>
                </div>
            </div>
            <button onclick="window.print()" class="no-print w-full sm:w-auto bg-orange-500 hover:bg-orange-600 text-white font-bold py-2 px-4 rounded-lg flex items-center justify-center transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M5 4v3H4a2 2 0 00-2 2v6a2 2 0 002 2h12a2 2 0 002-2V9a2 2 0 00-2-2h-1V4a2 2 0 00-2-2H7a2 2 0 00-2 2zm8 0H7v3h6V4zm0 8H7V9h6v3z" clip-rule="evenodd" />
                </svg>
                Gerar PDF
            </button>
        </div>
        
        <!-- Shift Buttons -->
        <div class="no-print mb-6 flex flex-wrap items-center justify-center sm:justify-start rounded-lg bg-gray-200 p-1 space-x-1">
            <button id="btn-manha" class="btn-shift flex-grow sm:flex-grow-0 px-4 py-2 text-sm font-semibold text-gray-600 rounded-md">Manha</button>
            <button id="btn-noite" class="btn-shift flex-grow sm:flex-grow-0 px-4 py-2 text-sm font-semibold text-gray-600 rounded-md">Noite / PNT</button>
        </div>

        <!-- Legend -->
        <div id="legend-container" class="mb-6 grid grid-cols-2 sm:grid-cols-4 gap-2 text-xs">
            <!-- Legend will be generated by JavaScript -->
        </div>

        <!-- Schedule Table -->
        <div class="overflow-x-auto">
            <table class="min-w-full text-sm text-left text-gray-700">
                <thead id="schedule-head" class="bg-gray-200 text-gray-600 uppercase text-xs tracking-wider">
                    <!-- Header will be generated by JavaScript -->
                </thead>
                <tbody id="schedule-body" class="bg-white">
                    <!-- Rows will be generated by JavaScript -->
                </tbody>
            </table>
        </div>
    </div>
    
    <!-- Footer -->
    <footer class="footer mt-8 text-center text-xs text-gray-500 p-4">
        Site criado por Jos√© Augusto Torres | jatgsilva@voegol.com.br
    </footer>


    <script>
        // --- DATA ---
        const staffMorning = {
            carlos:  { name: "Carlos W.", off: [2, 8, 10, 15, 16, 19, 20, 25, 26], class: 'bg-sky-100 text-sky-800' },
            rodrigo: { name: "Rodrigo S.", off: [4, 9, 12, 13, 14, 17, 18, 21, 27], class: 'bg-sky-100 text-sky-800' },
            gerson:  { name: "Gerson", off: [3, 10, 15, 20, 21, 26], class: 'bg-amber-100 text-amber-800' },
            gleidson:{ name: "Gleidson", off: [2, 8, 13, 20, 21, 22, 26], class: 'bg-amber-100 text-amber-800' },
            tarlysson:{ name: "Tarlysson", off: [3, 9, 15, 21, 27, 28], class: 'bg-amber-100 text-amber-800' },
            wesleyson:{ name: "Wesleyson", off: [5, 11, 17, 19, 20, 23, 24, 28, 29], class: 'bg-amber-100 text-amber-800' },
            lucas:   { name: "Lucas", off: [3, 4, 8, 9, 10, 14, 19, 23, 27, 28], class: 'bg-amber-100 text-amber-800' },
            renato:  { name: "Renato", off: [1, 6, 7, 10, 14, 19, 20, 21, 26], class: 'bg-amber-100 text-amber-800' },
        };

        const staffNight = {
            julie:     { name: "Julie", off: [2,3,8,13,14,15,17,20,21,22,26], time: '17:00', team: 'noite', class: 'bg-blue-100 text-blue-800' },
            thamires:  { name: "Thamires", off: [4,5,6,12,19,23,24,29,30], time: '17:00', team: 'noite', class: 'bg-blue-100 text-blue-800' },
            esteffano: { name: "Esteffano", off: [4,10,15,16,17,21,22,26,27,28], time: '16:00', team: 'noite_apoio', class: 'bg-amber-100 text-amber-800' },
            natanael:  { name: "Natanael", off: [3,8,9,10,15,19,20,21,27], time: '17:00', team: 'noite_apoio', class: 'bg-amber-100 text-amber-800' },
            alex:      { name: "Alex", off: [1,6,12,13,18,24,25,30,31], time: '17:00', team: 'noite_apoio', class: 'bg-amber-100 text-amber-800' },
            paulo:     { name: "Paulo Ricardo", off: [5,6,7,10,11,18,22,23,28,29], time: '16:00', team: 'noite_apoio', class: 'bg-amber-100 text-amber-800' },
            ramos:     { name: "Ramos", off: [1,8,14,15,21,26,27], time: '18:45', team: 'noite_apoio', class: 'bg-amber-100 text-amber-800' },
            claudio:   { name: "Claudio", off: [4,5,11,12,17,24,26,27,28], time: '18:45', team: 'noite_apoio', class: 'bg-amber-100 text-amber-800' },
            joao:      { name: "Joao", off: [5,6,9,10,11,14,15,20,26], time: '23:00', team: 'pnt', class: 'bg-emerald-100 text-emerald-800' },
            lais:      { name: "Lais", off: [1, 7,12,13,17,18,19,24,25], time: '22:00', team: 'pnt', class: 'bg-emerald-100 text-emerald-800' },
        };

        // --- GLOBAL VARS ---
        const year = 2025;
        const month = 6; // July (0-indexed)
        const daysInMonth = new Date(year, month + 1, 0).getDate();
        const weekDays = ['DOM', 'SEG', 'TER', 'QUA', 'QUI', 'SEX', 'SAB'];
        const greenClass = 'bg-emerald-100 text-emerald-800';
        const amberClass = 'bg-amber-100 text-amber-800';
        const roseClass = 'bg-rose-100 text-rose-800';
        const tableHead = document.getElementById('schedule-head');
        const tableBody = document.getElementById('schedule-body');
        const legendContainer = document.getElementById('legend-container');
        const btnManha = document.getElementById('btn-manha');
        const btnNoite = document.getElementById('btn-noite');

        // --- FUNCTIONS ---
        function createTag(text, baseClass) {
            return `<span class="name-tag ${baseClass}">${text}</span>`;
        }

        function generateMorningSchedule() {
            legendContainer.innerHTML = `
                <div class="flex items-center"><span class="h-4 w-4 rounded-full bg-sky-100 mr-2"></span> Equipe 05:00</div>
                <div class="flex items-center"><span class="h-4 w-4 rounded-full bg-amber-100 mr-2"></span> Equipe 06:30 disponivel</div>
                <div class="flex items-center"><span class="h-4 w-4 rounded-full bg-emerald-100 mr-2"></span> Responsavel / Rendicao</div>
                <div class="flex items-center"><span class="h-4 w-4 rounded-full bg-rose-100 mr-2"></span> Folga</div>
            `;
            tableHead.innerHTML = `
                <tr>
                    <th class="p-2 text-center">Data</th><th class="p-2 text-center">Dia</th><th class="p-2">Hangar (05:00)</th><th class="p-2">Rend. Hangar</th><th class="p-2">Pier (Principal)</th><th class="p-2">Equipe Pier</th>
                </tr>`;
            tableBody.innerHTML = '';
            let pierAlternator = 0;
            for (let day = 1; day <= daysInMonth; day++) {
                const isWorking = (person, day) => !staffMorning[person].off.includes(day);
                const onLeaveMorning = Object.keys(staffMorning).filter(p => !isWorking(p, day));
                
                const working0500 = ['carlos', 'rodrigo'].filter(p => isWorking(p, day));
                let available0630 = ['gerson', 'gleidson', 'tarlysson', 'wesleyson', 'lucas', 'renato'].filter(p => isWorking(p, day));
                if (available0630.length > 1) {
                    const rotation = day % available0630.length;
                    available0630 = [...available0630.slice(rotation), ...available0630.slice(0, rotation)];
                }
                let pierPool = [...available0630];
                let hangar0500 = '', rendHangar = '', pierPrincipal = '', pierTeamHTML = [];
                let pierRenditionNeeded = false, pierRenditionPersonId = null;
                const assignAndRemove = (pool) => pool.length > 0 ? pool.shift() : null;
                if (working0500.length === 2) {
                    const pierPerson = pierAlternator === 0 ? 'rodrigo' : 'carlos';
                    const hangarPerson = pierAlternator === 0 ? 'carlos' : 'rodrigo';
                    hangar0500 = createTag(staffMorning[hangarPerson].name, staffMorning[hangarPerson].class);
                    pierPrincipal = createTag(staffMorning[pierPerson].name, staffMorning[pierPerson].class);
                    const rendHangarPerson = assignAndRemove(pierPool);
                    if (rendHangarPerson) rendHangar = createTag(staffMorning[rendHangarPerson].name, greenClass);
                    const rendPierPerson = assignAndRemove(pierPool);
                    if(rendPierPerson) { pierRenditionNeeded = true; pierRenditionPersonId = rendPierPerson; }
                    pierAlternator = 1 - pierAlternator;
                } else if (working0500.length === 1) {
                    const hangarPerson = working0500[0];
                    hangar0500 = createTag(staffMorning[hangarPerson].name, staffMorning[hangarPerson].class);
                    const rendHangarPerson = assignAndRemove(pierPool);
                    if (rendHangarPerson) rendHangar = createTag(staffMorning[rendHangarPerson].name, greenClass);
                }
                if (pierRenditionNeeded && pierRenditionPersonId) {
                    pierTeamHTML.push(createTag(staffMorning[pierRenditionPersonId].name + ' (Rend.)', greenClass));
                }
                if (pierPool.length > 0) {
                    let leadPersonId = !pierRenditionNeeded ? pierPool[0] : null;
                    pierPool.forEach(personId => {
                        pierTeamHTML.push(createTag(staffMorning[personId].name, personId === leadPersonId ? greenClass : staffMorning[personId].class));
                    });
                }
                onLeaveMorning.forEach(p => pierTeamHTML.push(createTag(staffMorning[p].name, roseClass)));

                const date = new Date(year, month, day);
                const dayOfWeek = date.getDay();
                const isWeekend = dayOfWeek === 0 || dayOfWeek === 6;
                const rowClass = isWeekend ? 'weekend' : '';
                const dayFormatted = String(day).padStart(2, '0');
                const finalPierTeam = pierTeamHTML.join(' ');
                tableBody.innerHTML += `
                    <tr class="border-b ${rowClass}">
                        <td class="p-2 text-center font-semibold">${dayFormatted}</td><td class="p-2 text-center">${weekDays[dayOfWeek]}</td><td class="p-2">${hangar0500 || '<span class="text-gray-400">-</span>'}</td><td class="p-2">${rendHangar || '<span class="text-gray-400">-</span>'}</td><td class="p-2">${pierPrincipal || '<span class="text-gray-400">-</span>'}</td><td class="p-2 flex flex-wrap items-center">${finalPierTeam || ''}</td>
                    </tr>`;
            }
        }

        function generateNightSchedule() {
            legendContainer.innerHTML = `
                <div class="flex items-center"><span class="h-4 w-4 rounded-full bg-blue-100 mr-2"></span> Equipe Noite</div>
                <div class="flex items-center"><span class="h-4 w-4 rounded-full bg-emerald-100 mr-2"></span> Rendicao (PNT)</div>
                <div class="flex items-center"><span class="h-4 w-4 rounded-full bg-amber-100 mr-2"></span> Disponivel</div>
                <div class="flex items-center"><span class="h-4 w-4 rounded-full bg-rose-100 mr-2"></span> Folga</div>
            `;
            tableHead.innerHTML = `
                <tr>
                    <th class="p-2 text-center">Data</th><th class="p-2 text-center">Dia</th><th class="p-2">Hangar (Noite)</th><th class="p-2">Rend. Hangar (PNT)</th><th class="p-2">Pier (Noite)</th><th class="p-2">Rend. Pier (PNT)</th><th class="p-2">Equipe Disponivel</th>
                </tr>`;
            tableBody.innerHTML = '';
            
            let nightAlternator = 0;
            for (let day = 1; day <= daysInMonth; day++) {
                const isWorking = (person, day) => !staffNight[person].off.includes(day);
                const onLeaveNight = Object.keys(staffNight).filter(p => !isWorking(p, day));

                const workingNightPrincipals = ['julie', 'thamires'].filter(p => isWorking(p, day));
                let workingNightSupport = Object.keys(staffNight).filter(p => staffNight[p].team === 'noite_apoio' && isWorking(p, day));
                let availablePNTStaff = Object.keys(staffNight).filter(p => staffNight[p].team === 'pnt' && isWorking(p, day));

                let hangarPersonId = null, pierPersonId = null;
                if (workingNightPrincipals.length === 2) {
                    pierPersonId = nightAlternator === 0 ? 'thamires' : 'julie';
                    hangarPersonId = nightAlternator === 0 ? 'julie' : 'thamires';
                    nightAlternator = 1 - nightAlternator;
                } else if (workingNightPrincipals.length === 1) {
                    hangarPersonId = workingNightPrincipals[0];
                    pierPersonId = workingNightSupport.shift(); // Support takes the pier
                } else {
                    hangarPersonId = workingNightSupport.shift(); // Support takes hangar
                    pierPersonId = workingNightSupport.shift(); // Support takes pier
                }
                
                if (availablePNTStaff.length > 1) {
                    const rotation = day % availablePNTStaff.length;
                    availablePNTStaff = [...availablePNTStaff.slice(rotation), ...availablePNTStaff.slice(0, rotation)];
                }
                const rendHangarId = availablePNTStaff.shift();
                const rendPierId = availablePNTStaff.shift();

                const hangarHTML = hangarPersonId ? createTag(`${staffNight[hangarPersonId].name} (${staffNight[hangarPersonId].time})`, staffNight[hangarPersonId].class) : '<span class="text-gray-400">-</span>';
                const rendHangarHTML = rendHangarId ? createTag(`${staffNight[rendHangarId].name} (${staffNight[rendHangarId].time})`, greenClass) : '<span class="text-gray-400">-</span>';
                const pierHTML = pierPersonId ? createTag(`${staffNight[pierPersonId].name} (${staffNight[pierPersonId].time})`, staffNight[pierPersonId].class) : '<span class="text-gray-400">-</span>';
                const rendPierHTML = rendPierId ? createTag(`${staffNight[rendPierId].name} (${staffNight[rendPierId].time})`, greenClass) : '<span class="text-gray-400">-</span>';
                
                let availableHTML = workingNightSupport.map(p => createTag(`${staffNight[p].name} (${staffNight[p].time})`, amberClass)).join(' ');
                const onLeaveHTML = onLeaveNight.map(p => createTag(staffNight[p].name, roseClass)).join(' ');
                if(onLeaveHTML) availableHTML += ' ' + onLeaveHTML;


                const date = new Date(year, month, day);
                const dayOfWeek = date.getDay();
                const isWeekend = dayOfWeek === 0 || dayOfWeek === 6;
                const rowClass = isWeekend ? 'weekend' : '';
                const dayFormatted = String(day).padStart(2, '0');
                
                tableBody.innerHTML += `
                    <tr class="border-b ${rowClass}">
                        <td class="p-2 text-center font-semibold">${dayFormatted}</td>
                        <td class="p-2 text-center">${weekDays[dayOfWeek]}</td>
                        <td class="p-2">${hangarHTML}</td>
                        <td class="p-2">${rendHangarHTML}</td>
                        <td class="p-2">${pierHTML}</td>
                        <td class="p-2">${rendPierHTML}</td>
                        <td class="p-2 flex flex-wrap items-center">${availableHTML}</td>
                    </tr>`;
            }
        }

        // --- EVENT LISTENERS ---
        btnManha.addEventListener('click', () => {
            btnManha.classList.add('active');
            btnNoite.classList.remove('active');
            generateMorningSchedule();
        });

        btnNoite.addEventListener('click', () => {
            btnNoite.classList.add('active');
            btnManha.classList.remove('active');
            generateNightSchedule();
        });

        // --- INITIAL LOAD ---
        btnManha.click();
    </script>
</body>
</html>

